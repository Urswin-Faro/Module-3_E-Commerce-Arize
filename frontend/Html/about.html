<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>About Us | Arize</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <!-- Bootstrap Icons CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      defer
    ></script>
    <link href="../css/about.css" rel="stylesheet" />
  </head>
  <body class="bg-gray-100 text-gray-900">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <img
            src="https://github.com/Urswin-Faro/Arive_assets/blob/main/Assets/imgs/arize.png?raw=true"
            alt=""
            class="img-fluid"
            style="max-width: 150px"
          />
        </a>
        <input id="checkbox" type="checkbox" />
        <label
          class="toggle"
          for="checkbox"
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <div id="bar1" class="bars"></div>
          <div id="bar2" class="bars"></div>
          <div id="bar3" class="bars"></div>
          <!-- <span class="navbar-toggler-icon"></span> -->
        </label>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a
                class="nav-link active"
                aria-current="page"
                href="../index.html"
                >Home</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./products.html">Products</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./about.html">About Us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./game.html"
                ><img
                  width="30"
                  height="30"
                  src="https://img.icons8.com/glyph-neue/64/FFFFFF/ps-controller.png"
                  alt="ps-controller"
              /></a>
            </li>
          </ul>
          <div class="logoutContainer">
            <!-- Login/Signup Button -->
            <button
              class="btn btn-button ms-2"
              data-bs-toggle="modal"
              data-bs-target="#authModal"
              btn
            >
              Log In
            </button>
            <p
              class="userName"
              style="display: none; justify-content: center"
            ></p>

            <button style="display: none" id="logoutButton">Logout</button>

            <button
              class="btn btn-button ms-2"
              data-bs-toggle="modal"
              data-bs-target="#authModal1"
              btn
            >
              Sign Up
            </button>
          </div>
          <!-- Cart Icon Button -->

          <button class="btn btn-button ms-2" id="cart-toggle">
            <i class="bi bi-cart"></i> Cart
          </button>

          <!-- cart dropdown -->
          <div class="cart-dropdown">
            <button class="close-button" onclick="closeCart()">X</button>

            <h2>Cart</h2>
            <p class="free-shipping">Free standard shipping</p>

            <!-- Scrollable Container for Cart Items -->
            <div class="scrollable-container">
              <div id="cart-items"></div>
            </div>

            <div id="cart-items"></div>

            <div class="cart-footer">
              <div class="total-section">
                <p>Subtotal: <span id="subtotal">R 0.00</span></p>
                <h1>Total: <span id="total">R 0.00</span></h1>
              </div>
              <a href="./checkout.html">
                <button class="checkout-btn">Checkout</button>
              </a>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- Modal for Login -->
    <div
      class="modal fade"
      id="authModal"
      tabindex="-1"
      aria-labelledby="authModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="authModalLabel">Log In</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <!-- Form content for login/signup -->
            <div class="mb-3">
              <label for="email" class="form-label">Email address</label>
              <input
                type="email"
                class="form-control"
                id="email"
                placeholder="Enter your email"
              />
            </div>
            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
              <input
                type="password"
                class="form-control"
                id="password"
                placeholder="Enter your password"
              />
            </div>
            <div class="d-flex justify-content-between">
              <button class="btn btn-button" id="loginButton">Log In</button>
            </div>
            <a href="../frontend/Html/forgot.html" class="d-block mt-3"
              >Forgot password?</a
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Sign Up Modal -->
    <div
      class="modal fade"
      id="authModal1"
      tabindex="-1"
      aria-labelledby="authModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="authModalLabel">Sign Up</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <!-- Form content for signup -->
            <div class="mb-3">
              <label for="signupFullName" class="form-label">Full Name</label>
              <input
                type="text"
                class="form-control"
                id="signupFullName"
                placeholder="eg. Mike"
              />
            </div>
            <div class="mb-3">
              <label for="signupEmail" class="form-label">Email address</label>
              <input
                type="email"
                class="form-control"
                id="signupEmail"
                placeholder="eg. mikeoxlong69@gmail.com"
              />
            </div>
            <div class="mb-3">
              <label for="signupPassword" class="form-label">Password</label>
              <input
                type="password"
                class="form-control"
                id="signupPassword"
                placeholder="Enter your password"
              />
            </div>
            <div class="mb-3">
              <label for="signupConfirmPassword" class="form-label"
                >Confirm Password</label
              >
              <input
                type="password"
                class="form-control"
                id="signupConfirmPassword"
                placeholder="Confirm your password"
              />
            </div>
            <div class="d-flex justify-content-between">
              <button class="btn btn-button" id="signupSubmitButton">
                Submit
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-content">
        <h1>About Arize</h1>
        <p>Awaken the power of technology with cutting-edge innovation.</p>
      </div>
    </section>

    <!-- Content Section -->
    <section class="content">
      <h2 class="text-3xl font-semibold text-center mb-6">Who We Are</h2>
      <p class="text-lg text-gray-700 text-center mb-6">
        At <strong>Arize</strong>, we believe that technology is more than just
        hardware—it’s a gateway to
        <strong>creativity, productivity, and limitless possibilities</strong>.
      </p>
      <p class="text-lg text-gray-700 text-center">
        Whether you're a <strong>gamer</strong> chasing the ultimate
        performance, a <strong>content creator</strong> pushing boundaries, or a
        <strong>tech enthusiast</strong> building your dream setup, we provide
        the tools to <strong>awaken your digital potential</strong>.
      </p>
    </section>

    <!-- Features Section -->
    <section class="features container text-center py-5">
      <h2 class="fw-bold text-primary mb-4">Why Choose ARIZE?</h2>
      <div class="row justify-content-center">
        <div class="col-md-5 col-lg-4 mb-4">
          <div class="feature-card p-4">
            <h3>🔹 Quality Products</h3>
            <p>
              We curate only the best, rigorously tested technology from trusted
              brands.
            </p>
          </div>
        </div>
        <div class="col-md-5 col-lg-4 mb-4">
          <div class="feature-card p-4">
            <h3>💰 Affordable Pricing</h3>
            <p>Competitive deals without compromising on performance.</p>
          </div>
        </div>
        <div class="col-md-5 col-lg-4 mb-4">
          <div class="feature-card p-4">
            <h3>🤝 Customer Experience</h3>
            <p>
              Enjoy a seamless, personalized shopping journey with dedicated
              support.
            </p>
          </div>
        </div>
        <div class="col-md-5 col-lg-4 mb-4">
          <div class="feature-card p-4">
            <h3>🚀 Future-Ready Tech</h3>
            <p>
              Stay ahead with the latest innovations in gaming, PCs, and
              accessories.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="cta">
      <h2 class="text-3xl font-bold text-center">
        Join Us in Shaping the Future of Tech
      </h2>
      <p class="text-lg mt-2 text-center">
        Chat with us today and awaken your potential!
      </p>
      <a href="https://discord.gg/S4BRRCy4" class="cta-button">Join Now </a>
    </section>

    <script>
      // Ensure SweetAlert is included
      if (typeof Swal === "undefined") {
        let script = document.createElement("script");
        script.src = "https://cdn.jsdelivr.net/npm/sweetalert2@11";
        document.head.appendChild(script);
      }

      // the close button on cart
      function closeCart() {
        document.querySelector(".cart-dropdown").style.display = "none";
      }

      document.addEventListener("DOMContentLoaded", function () {
        const cartItemsContainer = document.getElementById("cart-items");
        const subtotalEl = document.getElementById("subtotal");
        const totalEl = document.getElementById("total");
        const cartDropdown = document.querySelector(".cart-dropdown");
        const cartToggleBtn = document.getElementById("cart-toggle");

        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        function updateCartDisplay() {
          cartItemsContainer.innerHTML = "";
          let subtotal = 0;

          if (cart.length === 0) {
            cartItemsContainer.innerHTML =
              "<p class='empty-cart'>Your cart is empty</p>";
          } else {
            cart.forEach((item, index) => {
              subtotal += item.price * item.quantity;

              const cartItem = document.createElement("div");
              cartItem.classList.add("cart-item");

              cartItem.innerHTML = `
                        <img src="${item.image}" alt="${item.name}">
                        <div class="item-details">
                            <h3>${item.name}</h3>
                            <p>${item.size ? "Size: " + item.size : ""} ${
                item.color ? "Color: " + item.color : ""
              }</p>
                            <p class="item-price">R ${item.price.toFixed(2)}</p>
                        </div>
                        <div class="quantity-controls">
                            <button class="quantity-btn" onclick="changeQuantity(${index}, -1)">-</button>
                            <span>${item.quantity}</span>
                            <button class="quantity-btn" onclick="changeQuantity(${index}, 1)">+</button>
                        </div>
                        <button class="remove-btn" onclick="removeFromCart(${index})">🗑️</button>
                    `;

              cartItemsContainer.appendChild(cartItem);
            });
          }

          subtotalEl.textContent = `R ${subtotal.toFixed(2)}`;
          // Apply any additional fees/taxes if needed
          const tax = subtotal * 0.15; // Example 15% tax
          const total = subtotal + tax;
          totalEl.textContent = `R ${total.toFixed(2)}`;
          localStorage.setItem("cart", JSON.stringify(cart));
        }

        window.changeQuantity = function (index, change) {
          if (cart[index].quantity + change > 0) {
            cart[index].quantity += change;
          } else {
            cart.splice(index, 1);
          }
          updateCartDisplay();
        };

        window.removeFromCart = function (index) {
          cart.splice(index, 1);
          updateCartDisplay();
        };

        // Toggle cart dropdown visibility
        cartToggleBtn.addEventListener("click", function () {
          cartDropdown.style.display =
            cartDropdown.style.display === "none" ||
            cartDropdown.style.display === ""
              ? "block"
              : "none";
        });

        updateCartDisplay();
      });

      document.addEventListener("DOMContentLoaded", function () {
        const signupSubmitButton =
          document.getElementById("signupSubmitButton");

        signupSubmitButton.addEventListener("click", function () {
          const fullName = document.getElementById("signupFullName").value;
          const email = document.getElementById("signupEmail").value;
          const password = document.getElementById("signupPassword").value;
          const confirmPassword = document.getElementById(
            "signupConfirmPassword"
          ).value;

          // Validation
          if (!fullName || !email || !password || !confirmPassword) {
            Swal.fire({
              icon: "error",
              title: "Oops...",
              text: "Please fill in all fields!",
            });
            return;
          }

          if (password !== confirmPassword) {
            Swal.fire({
              icon: "error",
              title: "Oops...",
              text: "Passwords do not match!",
            });
            return;
          }

          const userData = {
            full_name: fullName,
            email: email,
            password: password,
          };

          // Send data to the backend
          fetch("http://127.0.0.1:3030/api/auth/signup", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(userData),
          })
            .then((response) => response.json())
            .then((data) => {
              if (data.success) {
                // Show success message
                // Show error message based on the response
                Swal.fire({
                  icon: "error",
                  title: "Signup Failed",
                  text: data.message || "An error occurred during signup.",
                });
              } else {
                Swal.fire({
                  icon: "success",
                  title: "Signup Successful!",
                  text: "You have successfully signed up.",
                }).then(() => {
                  // Optionally, redirect the user or close the modal
                  window.location.href = "./index.html"; // Redirect if needed
                });
              }
            })
            .catch((error) => {
              console.error("Error signing up:", error);
              Swal.fire({
                icon: "error",
                title: "Oops...",
                text: "An error occurred while signing up. Please try again.",
              });
            });
        });
      });

      document.addEventListener("DOMContentLoaded", function () {
        const loginButton = document.getElementById("loginButton");
        const userDisplay = document.querySelector(".userName"); // Select the <p> tag
        const logoutButton = document.getElementById("logoutButton"); // Logout button

        loginButton.addEventListener("click", async function (event) {
          event.preventDefault();

          const email = document.getElementById("email").value;
          const password = document.getElementById("password").value;

          if (!email || !password) {
            alert("Please enter both email and password.");
            return;
          }

          try {
            const response = await fetch("http://127.0.0.1:3030/users/login", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ email, password }),
              credentials: "include", // Important to send cookies
            });

            const data = await response.json();

            if (data.success) {
              localStorage.setItem("accessToken", data.accessToken);
              const name = data.name.split(" ")[0]; // Get first name
              localStorage.setItem("user", name);

              // Display the username
              userDisplay.innerText = `Hi! ${name}`;
              userDisplay.style.display = "block";

              console.log("Logged in user:", name);

              Swal.fire({
                icon: "success",
                title: "Login Successful!",
                text: "You are now logged in.",
              }).then(() => {
                window.location.href = "./about.html"; // Reload page
              });
            } else {
              Swal.fire({
                icon: "error",
                title: "Login Failed",
                text: data.message,
              });
            }
          } catch (error) {
            console.error("Login error:", error);
          }
        });

        // Check if user is logged in
        if (localStorage.getItem("accessToken")) {
          document.querySelectorAll("[btn]").forEach((value) => {
            value.style.display = "none"; // Hide login button
          });

          const name = localStorage.getItem("user");
          if (name) {
            userDisplay.innerText = ` Hi! ${name}`;
            userDisplay.style.display = "block"; // Show username
            userDisplay.style.color = "white"; // Show username in white
            logoutButton.style.display = "block"; // Show logout button
          }
        }

        // Logout functionality
        logoutButton.addEventListener("click", function () {
          localStorage.removeItem("accessToken");
          localStorage.removeItem("user");
          Swal.fire({
            icon: "info",
            title: "Logged Out",
            text: "You have been logged out successfully.",
          }).then(() => {
            window.location.href = "../index.html";
          });
        });
      });
    </script>

    <footer class="bg-dark text-white py-4">
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <h5>Contact Us</h5>
            <p>123 Business St, Suite 456</p>
            <p>City, Country, 12345</p>
            <p>Email: admin@arize.co.za</p>
          </div>
          <div class="col-md-4">
            <h5>Quick Links</h5>
            <ul class="list-unstyled">
              <li><a href="../index.html" class="text-white">Home</a></li>
              <li><a href="./products.html" class="text-white">Products</a></li>
              <li><a href="./about.html" class="text-white">About Us</a></li>
            </ul>
          </div>
          <div class="col-md-4">
            <h5>Follow Us</h5>
            <ul class="list-unstyled">
              <li>
                <a href="https://discord.gg/S4BRRCy44" class="text-white"
                  ><i class="fab fa-discord"></i>Discord</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="text-center py-3">
        <p>&copy; 2025 Your Company Name. All rights reserved.</p>
      </div>
    </footer>
  </body>
</html>
